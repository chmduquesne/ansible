---
# vault imported stuff
ssh_user: "{{ vault_ssh_user }}"
ssh_pubkey_t450: "{{ vault_ssh_pubkey_t450 }}"
ssh_pubkey_work: "{{ vault_ssh_pubkey_work }}"

ansible_user: "{{ ssh_user }}"
users:
  - username: "{{ ssh_user }}"
    authorized_keys:
      - "{{ ssh_pubkey_t450 }}"
      - "{{ ssh_pubkey_work }}"
    home_create: yes
promoted:
  - {name: "{{ ssh_user }}", promote: ALL, nopasswd: true}
sshd_config:
  PasswordAuthentication: "no"
  ChallengeResponseAuthentication: "no"
  UsePAM: "yes"
  AcceptEnv: "LANG LC_*"
  Subsystem: "sftp /usr/lib/sftp-server"

wireguard_default:
  wg0:
    peers:
      dedibox:
        pubkey: "{{ vault_wg0_dedibox_pubkey }}"
        endpoint: "{{ vault_wg0_dedibox_endpoint }}"
        allowedips:
          - "0.0.0.0/0"
          - "::/0"
        persistentkeepalive: 20
      raspberrypi:
        pubkey: "{{ vault_wg0_raspberrypi_pubkey }}"
        allowedips:
          - "{{ vault_wg0_raspberrypi_inet6_prefix }}::/{{ vault_wg0_raspberrypi_inet6_mask }}"
      t450:
        pubkey: "{{ vault_wg0_t450_pubkey }}"
      op3t:
        pubkey: "{{ vault_wg0_op3t_pubkey }}"
      moviebox:
        pubkey: "{{ vault_wg0_moviebox_pubkey }}"
    gw:
      routed_inet6:
        prefix: "{{ vault_wg0_raspberrypi_inet6_prefix }}"
        mask: "{{ vault_wg0_raspberrypi_inet6_mask }}"
      in:
        hostname: raspberrypi
        interface: wlan0
      out:
        hostname: dedibox
        interface: enp0s20
    auto_assign_ips:
      - 10.0.0.0/8
      - fd1a:6126:2887::/48
      - "{{ vault_wg0_global_inet6_prefix }}::/{{ vault_wg0_global_inet6_mask }}"
    mtu: 1360
